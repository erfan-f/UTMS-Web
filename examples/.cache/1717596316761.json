{"date":"2024-06-05T14:05:15.561Z","courseId":"17","assignment":"AP-Spring03-CA6-phase2","trace":{"content":"#include \"Get_method.hpp\"\n\nGet::Get(std::string t , std::vector <std::string> cmds)\n:Method(t,cmds) {}\n\nGet::~Get() {}\n\nvoid Get::Process_Cmd(std::string cmd_line ,std::vector<Major*> &majors ,std::vector<Unit*> &units ,std::vector<User*> &users ,std::vector<Course*> &courses, User **current_user,std::vector<std::string> &response)\n{\n\tstd::stringstream S(cmd_line);\n\n\tstd::string temp_str,command;\n\n\tS >> temp_str >> command >> temp_str;\n\n\tif(command == COURSES_CMD)\n\t{\n\t\tstd::string id_argument,id,garbage_string;\n\t\tS >> id_argument >> id >> garbage_string;\n\t\tif(id_argument == \"\")\n\t\t{\n\t\t\tget_All_Courses_Info(courses,response);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(id_argument != ID_ARGUMENT || id == \"\")\n\t\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\t\tif(!is_Number(id))\n            \tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\t\tif(std::stoll(id) <= 0)\n\t\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\t\t\tif(garbage_string != \"\")\n\t\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\t\tget_Course_Info(courses,id,response);\n\t\t}\n\t}\n\telse if(command == POST_CMD)\n\t{\n\t\tif( dynamic_cast<SystemOperator*>(*current_user) != NULL)\n\t\t\tthrow AcessibilityException(PERMISSION_DENIED_ERROR);\n\t\t\n\t\tstd::string argument_1,argument_2,input_1,input_2,garbage_string;\n\t\tstd::string id,post_id;\n\t\tS >> argument_1 >> input_1 >> argument_2 >> input_2 >> garbage_string;\n\t\tif((argument_1 == ID_ARGUMENT || argument_1 == POST_ID_ARGUMENT ) && (argument_2 == ID_ARGUMENT || argument_2 == POST_ID_ARGUMENT))\n\t\t{\n\t\t\tif(argument_1 == ID_ARGUMENT)\n\t\t\t{\n\t\t\t\tid = input_1;\n\t\t\t\tpost_id = input_2;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tid = input_2;\n\t\t\t\tpost_id = input_1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\tif(!is_Number(id) || !is_Number(post_id))\n            throw ArgumentException(BAD_REQUEST_ERROR);\n\n\t\tif(std::stoll(id) <0 || std::stoll(post_id) <=0)\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\t\t\n\t\tif(garbage_string != \"\")\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\tget_User_Post(users,id,post_id,response);\n\t}\n\telse if(command == PERSONAL_PAGE_CMD)\n\t{\n\t\tstd::string id_argument,id,garbage_string;\n\t\tS >> id_argument >> id >> garbage_string;\n\t\tif(id_argument != ID_ARGUMENT || id == \"\")\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\tif(!is_Number(id))\n            throw ArgumentException(BAD_REQUEST_ERROR);\n\t\tif(std::stoll(id) < 0)\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\t\tif(garbage_string != \"\")\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\tget_Personal_Page(users,id,response);\n\t}\n\telse if(command == NOTIFICATION_CMD)\n\t{\n\t\tstd::string argument_str;\n\t\tS >> argument_str;\n\t\t\n\t\tif(argument_str != \"\")\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\t\t\n\t\tresponse.push_back((*current_user)->get_Notifications());\n\t}\n\telse if(command == MY_COURSES_CMD)\n\t{\n\t\tstd::string argument_str;\n\t\tS >> argument_str;\n\t\tif(argument_str != \"\")\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\tStudent *student = dynamic_cast<Student*>(*current_user);\n\t\tif(student == NULL)\n            throw AcessibilityException(PERMISSION_DENIED_ERROR);\n\n\t\tresponse.push_back(student->get_Courses_Info());\n\t}\n\telse if(command == COURSE_CHANNEL_CMD)\n\t{\n\t\tstd::string course_id_argument,course_id,garbage_str;\n\n\t\tS >> course_id_argument >> course_id >> garbage_str;\n\n\n\t\tif( course_id_argument != ID_ARGUMENT || !is_Number(course_id) || course_id == \"\"  || garbage_str != \"\")\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\tCourse *course = Find_Course(courses,course_id);\n\n\t\tif(!course->is_Allowed_to_View_Channel((*current_user)->get_Id()))\n\t\t\tthrow AcessibilityException(PERMISSION_DENIED_ERROR);\n\n\t\tresponse.push_back(course->get_Channel_Info());\n\n\t\t}\n\telse if(command == COURSE_POST_CMD)\n\t{\n\t\tstd::string argument,garbage_str;\n\t\tstd::string course_id,post_id;\n\t\tbool course_id_is_entered = false;\n\t\tbool post_id_is_entered = false;\n\n\t\tfor(int i=0 ; i<2 ; i++)\n\t\t{\n\t\t\tS >> argument;\n\t\t\tif(argument == ID_ARGUMENT && !course_id_is_entered)\n\t\t\t{\n\t\t\t\tS >> course_id;\n\t\t\t\tcourse_id_is_entered = true;\n\t\t\t}\n\t\t\telse if(argument == POST_ID_ARGUMENT && !post_id_is_entered)\n\t\t\t{\n\t\t\t\tS >> post_id;\n\t\t\t\tpost_id_is_entered = true;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\t\targument = \"\";\n\t\t}\n\n\t\tS >> garbage_str;\n\t\tif(garbage_str != \"\"  || !is_Number(course_id) || course_id == \"\" || post_id == \"\" )\n\t\t\tthrow ArgumentException(BAD_REQUEST_ERROR);\n\n\t\tCourse *course = Find_Course(courses,course_id);\n\n\t\tstd::string course_info = course->get_All_Info();\n\t\tstd::string post_info = course->get_Channel_Post(post_id);\n\n\t\tif(!course->is_Allowed_to_View_Channel((*current_user)->get_Id()))\n\t\t\tthrow AcessibilityException(PERMISSION_DENIED_ERROR);\n\n\t\tresponse.push_back(course_info);\t\n\t\tresponse.push_back(post_info);\t\n\t}\n}\n\nvoid Get::get_All_Courses_Info(std::vector<Course*> courses , std::vector<std::string> &response)\n{\t\n\tif(courses.size() == 0)\n\t\tthrow CommandException(EMPTY_ERROR);\n\n\tfor(int i=0 ; i<courses.size(); i++)\n\t{\n\t\tresponse.push_back(courses[i]->get_Info());\n\t}\n\t\n}\n\nvoid Get::get_Course_Info(std::vector<Course*> courses , std::string course_id,std::vector<std::string> &response)\n{\n\tCourse *target_course = Find_Course(courses,course_id);\n\t\n\tresponse.push_back(target_course->get_All_Info());\n}\n\n\nvoid Get::get_Personal_Page(std::vector<User*> users,std::string user_id,std::vector<std::string> &response)\n{\n\tUser *user = Find_User(users,user_id);\n\n\tresponse.push_back(user->get_Page_Info());\n}\n\n\nvoid Get::get_User_Post(std::vector<User*> users,std::string user_id,std::string post_id,std::vector<std::string> &response)\n{\n\tUser *user = Find_User(users,user_id);\n\t\n\tresponse.push_back(user->get_Post(post_id));\n}","filename":"/home/erfan/Desktop/Project6_2/A6_1/Get_method.cpp","identifier":"Save Document","languageId":"cpp","version":33,"lineCount":208},"failed":false}