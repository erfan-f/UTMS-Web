{"date":"2024-06-08T12:51:53.090Z","courseId":"17","assignment":"AP-Spring03-CA6-phase3","trace":{"content":"#include <iostream>\n#include <string>\n\n#include \"../server/server.hpp\"\n#include \"handlers.hpp\"\n#include \"SystemController.hpp\"\n\n\nvoid mapServerPaths(Server& server,SystemController *ut_engine);\n\n\nint main(int argc, char* argv[]) \n{\n\n\tSystemController *ut_engine =  new SystemController();\n\tut_engine->Read_Majors(argv[2]);\n\tut_engine->Read_Units(argv[3]);\n\tut_engine->Read_Professor(argv[4]);\n\tut_engine->Read_Student(argv[5]);\n\n\tut_engine->Connect_to_All_User();\n\n    try \n    {\n\t   \tint port = argc > 1 ? std::stoi(argv[1]) : 8080;\n\t    Server server(port);\n\t    mapServerPaths(server,ut_engine);\n\t    std::cout << \"Server running on port: \" << port << std::endl;\n\t    server.run();\n    }\n    catch (const std::invalid_argument& e) \n    {\n        std::cerr << e.what() << std::endl;\n    }\n    catch (const Server::Exception& e) \n    {\n        std::cerr << e.getMessage() << std::endl;\n    }\n    return 0;\n}\n\nvoid mapServerPaths(Server& server,SystemController *ut_engine)\n {\n    server.setNotFoundErrPage(\"static/404.html\");\n    server.get(\"/\", new ShowPage(\"static/home.html\"));\n    server.get(\"/home.png\", new ShowImage(\"static/home.png\"));\n    server.get(\"/rand\", new RandomNumberHandler());\n    server.get(\"/login\", new ShowPage(\"static/logincss.html\"));\n    server.post(\"/login\", new LoginHandler(ut_engine));\n    server.get(\"/bad_request\", new ShowPage(\"static/bad_request.html\"));\n    server.get(\"/permission_denied\", new ShowPage(\"static/permission_denied.html\"));\n    server.get(\"/not_found\", new ShowPage(\"static/not_found.html\"));\n    server.get('/' + STUDENT_TYPE, new ShowPage(\"static/student_page.html\"));\n    server.get('/' + TEACHER_TYPE, new ShowPage(\"static/teacher_page.html\"));\n    server.get('/' + OPERATOR_TYPE, new ShowPage(\"static/admin_page.html\"));\n    server.get(\"/logout\" , new ShowPage(\"static/logout.html\"));\n    server.post(\"/logout\" , new LogoutHandler(ut_engine));\n    server.get(\"/new_post\" , new ShowPage(\"static/new_post.html\"));\n    server.post(\"/new_post\" , new NewPostHandler(ut_engine));\n\n }\n\n","filename":"/home/erfan/Desktop/Phase_3/examples/main.cpp","identifier":"Save Document","languageId":"cpp","version":1,"lineCount":63},"failed":false}