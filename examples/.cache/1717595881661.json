{"date":"2024-06-05T13:57:59.402Z","courseId":"17","assignment":"AP-Spring03-CA6-phase2","trace":{"content":"#include \"user.hpp\"\n\nUser::User(std::string n,std::string i,std::string p)\n{\n\tname = n;\n\tid = i;\n\tpassword = p;\n\tlogged_in = false;\n\tnum_of_posts_history = 0;\n}\n\n\nUser::~User() {}\n\nUser::User(std::string n,std::string i,std::string m,std::string m_i,std::string p)\n{\n\tname = n;\n\tid = i;\n\tmajor_id = m_i;\n\tmajor = m;\n\tpassword = p;\n\tlogged_in = false;\n\tnum_of_posts_history = 0;\n}\n\n\nbool User::is_Valid_Id(std::string i)\n{\n\tif(id == i)\n\t\treturn true;\n\treturn false;\n}\n\nbool User::is_Valid_Password(std::string p)\n{\n\tif(password == p)\n\t\treturn true;\n\treturn false;\n}\n\nvoid User::Login()\n{\n\tlogged_in = true;\n}\n\nvoid User::Logout()\n{\n\tlogged_in =false;\n}\n\nvoid User::Add_Post(UT_Media *new_post)\n{\t\n\tnew_post->set_Id(std::to_string(num_of_posts_history +1));\n\tposts.push_back(new_post);\n\tUT_Post *ut_post = dynamic_cast<UT_Post*>(new_post);\n\tif(ut_post != NULL)\n\t\tSend_Notification(NEW_POST_NOTIF);\n\telse\n\t\tSend_Notification(NEW_FORM_NOTIF);\t\n\n\tnum_of_posts_history++;\n}\n\nvoid User::Connect(User *target)\n{\n\tfor(int i=0 ; i<connection_list.size() ; i++)\n\t{\n\t\tif(connection_list[i] == target)\n\t\t\tthrow AvailabilityException(BAD_REQUEST_ERROR);\n\t}\n\tconnection_list.push_back(target);\n}\n\nbool User::Comamnd_Permision_Check(std::string cmd)\n{\n\tfor(int i=0 ; i<valid_cmds.size(); i++)\n\t{\n\t\tif(cmd == valid_cmds[i])\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\n\nstd::string User::get_Id()\n{\n\treturn id;\n}\n\nstd::string User::get_Major_Id()\n{\n\treturn major_id;\n}\n\nstd::string User::get_Name()\n{\n\treturn name;\n}\n\nvoid User::Sort_Posts()\n{\n\tUT_Media *temp;\n\tfor(int i=0 ; i<posts.size() ; i++)\n\t{\n\t\tfor(int j=0 ; j<posts.size() -1 ; j++)\n\t\t{\n\t\t\tif(posts[j]->Compare_Id(posts[j+1]))\n\t\t\t{\n\t\t\t\ttemp = posts[j];\n\t\t\t\tposts[j] = posts[j+1];\n\t\t\t\tposts[j+1] = temp;\n\t\t\t}\n\t\t}\n\t}\n}\n\nstd::string User::get_Post(std::string post_id)\n{\n\tstd::ostringstream S;\n\tUT_Media *post;\n\tbool id_validation = false;\n\n\tfor(int i=0 ; i<posts.size() ; i++)\n\t{\n\t\tif(posts[i]->is_Valid_Id(post_id))\n\t\t{\n\t\t\tid_validation = true;\n\t\t\tpost = posts[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(!id_validation)\n\t\tthrow AvailabilityException(NOT_FOUND_ERROR);\n\tS << this->get_Info();\n\tS << post->get_All_Info();\n\treturn S.str();\n}\n\nvoid User::Send_Notification(std::string notice_text)\n{\n\tfor(int i=0 ; i<connection_list.size() ; i++)\n\t{\t\n\t\tconnection_list[i]->Recieve_Notification(new Notification{id,name,notice_text});\n\t}\n}\n\nvoid User::Recieve_Notification(Notification* notif)\n{\n\tnotifications.push_back(notif);\n}\n\nstd::string User::get_Notifications()\n{\n\tstd::ostringstream S;\n\n\tif(notifications.size() == 0)\n\t\tthrow AvailabilityException(EMPTY_ERROR);\n\n\tfor(int i= notifications.size() - 1 ; i>=0 ; i--)\n\t{\n\t\tS << notifications[i]->id << SPACE_CHAR << notifications[i]->name << NAME_POST_SEPRATOR  << SPACE_CHAR << notifications[i]->notice << std::endl;\n\t\tdelete notifications[i];\n\t}\n\n\tnotifications.clear();\n\t\n\treturn S.str();\n}\n\nvoid User::Delete_Post(std::string post_id)\n{\n\tbool id_validation = false;\n\tfor(int i=0 ; i<posts.size() ; i++)\n\t{\n\t\tif(posts[i]->is_Valid_Id(post_id))\n\t\t{\n\t\t\tid_validation = true;\n\t\t\tdelete posts[i];\n\t\t\tposts.erase(posts.begin() + i);\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(!id_validation)\n\t\tthrow AvailabilityException(NOT_FOUND_ERROR);\n}\n\n\nvoid User::Free_Allocated_Memory()\n{\n\tfor(int i=0 ; i<posts.size() ; i++)\n\t\tdelete posts[i];\n\t\n\tfor(int i=0 ; i<notifications.size() ; i++)\n\t\tdelete notifications[i];\n}\t\n\n\nvoid User::Set_Profile_Photo(std::string photo_path)\n{\n\tprofile_photo_path = photo_path;\n}\n\n\nUT_Media* User::Find_Post(std::string post_id)\n{\n\tUT_Media *target_post;\n\tbool id_validation = false;\n\tfor(int i=0 ; i<posts.size() ; i++)\n\t{\n\t\tif(posts[i]->is_Valid_Id(post_id))\n\t\t{\n\t\t\tid_validation = true;\n\t\t\ttarget_post = posts[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(!id_validation)\n\t\tthrow AvailabilityException(NOT_FOUND_ERROR);\n\t\n\treturn target_post;\n\t\n}\n","filename":"/home/erfan/Desktop/Project6_2/A6_1/user.cpp","identifier":"Save Document","languageId":"cpp","version":29,"lineCount":223},"failed":false}